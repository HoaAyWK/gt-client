import{j as n,B as l,S,a as e,T as C,I as ve,X as Y,f as J,r as d,v as Te,u as f,Y as s,Z as Ee,L as Ne,b as Re,_ as Ie,$ as j,a0 as De,F as w,J as Ae,A as Le,H as R,a1 as ze,a2 as je,a3 as we,a4 as Be,a5 as ke,N as Ge,a6 as _e,a7 as Me,a8 as Fe,a9 as Ue,aa as $e,ab as He,ac as D,ad as A,ae as L,af as z,ag as qe,ah as We,ai as Ye,aj as y,ak as W,P as Je}from"./index-042ccfe6.js";const Xe=({item:c})=>{const{productId:r,productVariantId:b,productName:O,productImage:P,quantity:u,unitPrice:x,subTotal:h,totalDiscount:p}=c;return n(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n(S,{spacing:1,direction:"row",sx:{minWidth:250},children:[e(l,{component:"img",src:P,alt:O,sx:{width:56,height:56,objectFit:"cover",borderRadius:1}}),n(S,{spacing:.5,children:[e(C,{variant:"subtitle1",color:"text.primary",children:O}),n(S,{spacing:1,direction:"row",children:[e(ve,{icon:"fluent-mdl2:quantity",width:24,height:24,sx:{color:"text.secondary"}}),e(C,{variant:"body1",color:"text.primary",children:u})]})]})]}),e(C,{variant:"subtitle1",color:"text.primary",children:Y(h)})]})},Ze=({order:c})=>{const{id:r,orderNumber:b,createdDateTime:O,orderStatus:P,totalAmount:u,orderItems:x,paymentMethod:h}=c;J();const[p,m]=d.useState(!1);d.useState(!1),Te();const{cancelOrderStatus:T}=f(i=>i.orders),E=d.useMemo(()=>{switch(P){case s.PENDING:return"warning";case s.PROCESSING:return"warning";case s.COMPLETED:return"success";default:return"error"}},[P]),I=()=>{m(!0)};return n(l,{sx:{p:1,borderRadius:i=>i.spacing(1),border:i=>`1px solid ${i.palette.divider}`,backgroundColor:i=>i.palette.background.content},children:[n(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n(S,{spacing:1,children:[n(C,{variant:"body1",children:["Order Number: #",b]}),n(C,{variant:"body1",children:["Order Date: ",Ee(O)]})]}),e(Ne,{color:E,children:P})]}),e(l,{sx:{mt:1,mb:3,borderBottom:"1px dashed",borderColor:"divider"}}),e(S,{spacing:2,children:x.map(i=>e(Xe,{item:i},i.id))}),e(l,{sx:{my:2,borderBottom:"1px dashed",borderColor:"divider"}}),n(l,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e(C,{variant:"body1",children:"Total"}),e(C,{variant:"h6",component:"span",color:"error",children:Y(u)})]}),e(l,{sx:{mt:2,display:"flex",justifyContent:"flex-end"},children:n(S,{spacing:2,direction:"row",children:[e(Re,{LinkComponent:Ie,to:`${j.USER_ORDERS}/${r}`,color:"inherit",variant:"outlined",children:"Details"}),P===s.PENDING&&h===De.CASH&&e(w,{children:e(Ae,{color:"error",variant:"outlined",onClick:I,loading:T===Le.LOADING,children:"Cancel"})})]})})]})},Ke="/assets/find-b9ecd76a.png",v=c=>{const{orders:r,page:b,onPageChange:O,perPageOptions:P,perPage:u,onPerPageChange:x,totalPage:h}=c;return e(w,{children:r.length>0?n(w,{children:[n(R,{container:!0,spacing:2,sx:{mb:2},children:[e(R,{item:!0,xs:4,children:n(ze,{variant:"outlined",sx:{minWidth:120},children:[e(je,{id:"all-orders-per-page",children:"Rows per page"}),e(we,{labelId:"all-orders-per-page",label:"Rows per page",value:u,onChange:x,size:"small",children:P.map(p=>e(Be,{value:p,children:p},p))})]})}),e(R,{item:!0,xs:1}),e(R,{item:!0,xs:7,children:e(l,{sx:{display:"flex",justifyContent:"flex-end"},children:e(ke,{count:h,color:"primary",variant:"outlined",shape:"rounded",siblingCount:0,boundaryCount:2,page:b,onChange:O})})})]}),e(S,{spacing:2,children:r.map(p=>e(Ze,{order:p},p.id))})]}):e(l,{sx:{mt:2,display:"flex",alignItems:"center",justifyContent:"center"},children:n(S,{spacing:2,children:[e(l,{component:"img",alt:"empty order",src:Ke,sx:{width:154,height:164,objectFit:"cover"}}),e(C,{variant:"subtitle1",color:"text.secondary",textAlign:"center",children:"No orders yet"})]})})})},g=[5,10,25],Qe=()=>{const c=s.ALL,r=1,b=Ge(),[O]=_e(),P=O.get("tab"),[u,x]=d.useState(P||c),[h,p]=d.useState(g[0]),[m,T]=d.useState(r),[E,I]=d.useState(g[0]),[i,B]=d.useState(r),[k,G]=d.useState(r),[_,X]=d.useState(g[0]),[M,F]=d.useState(r),[U,Z]=d.useState(g[0]),[$,H]=d.useState(r),[q,K]=d.useState(g[0]),o=J(),Q=f(a=>Me(a,m)),V=f(a=>Fe(a,i)),ee=f(a=>Ue(a,k)),ae=f(a=>$e(a,M)),re=f(a=>He(a,$)),{getOrdersTotalPage:te,getPendingOrdersTotalPage:se,getProcessingOrdersTotalPage:ne,getCancelledOrdersTotalPage:de,getRefundedOrdersTotalPage:oe,getOrdersPages:ie,getPendingOrdersPages:ge,getProcessingOrdersPages:ce,getCancelledOrdersPages:le,getRefundedOrdersPages:Pe}=f(a=>a.orders);d.useEffect(()=>{switch(u){case c:o(z({page:m,pageSize:h,status:c}));break;case s.PENDING:o(L({page:r,pageSize:g[0]}));break;case s.PROCESSING:o(A({page:r,pageSize:g[0]}));break;case s.CANCELLED:o(D({page:r,pageSize:g[0]}));break;default:console.log("None supported tab.")}},[u]);const pe=(a,t)=>{x(t),b(t===c?{pathname:j.USER_ORDERS}:`${j.USER_ORDERS}?tab=`+t)},ue=a=>{p(a.target.value),T(r),o(z({page:r,pageSize:a.target.value,status:c}))},he=(a,t)=>{T(t),ie.indexOf(t)>-1||o(z({page:t,pageSize:h,status:c}))},Oe=a=>{I(a.target.value),B(r),o(L({page:r,pageSize:a.target.value}))},Ce=(a,t)=>{B(t),ge.indexOf(t)>-1||o(L({page:t,pageSize:E}))},Se=a=>{X(a.target.value),G(r),o(A({page:r,pageSize:a.target.value}))},be=(a,t)=>{G(t),ce.indexOf(t)>-1||o(A({page:t,pageSize:_}))},fe=a=>{Z(a.target.value),F(r),o(D({page:r,pageSize:a.target.value}))},xe=(a,t)=>{F(t),le.indexOf(t)>-1||o(D({page:t,pageSize:U}))},me=a=>{K(a.target.value),H(r),o(W({page:r,pageSize:a.target.value}))},ye=(a,t)=>{H(t),Pe.indexOf(t)>-1||o(W({page:t,pageSize:q}))};return n(qe,{value:u,children:[e(l,{sx:{borderBottom:1,borderColor:"divider"},children:e(We,{onChange:pe,"aria-label":"order-tabs",children:Object.keys(s).map(a=>e(Ye,{label:s[a],value:s[a]},s[a]))})}),e(y,{sx:{px:0},value:s.ALL,children:e(v,{orders:Q,page:m,onPageChange:he,perPage:h,onPerPageChange:ue,perPageOptions:g,totalPage:te})}),e(y,{sx:{px:0},value:s.PENDING,children:e(v,{orders:V,page:i,onPageChange:Ce,perPage:E,onPerPageChange:Oe,perPageOptions:g,totalPage:se})}),e(y,{sx:{px:0},value:s.PROCESSING,children:e(v,{orders:ee,page:k,onPageChange:be,perPage:_,onPerPageChange:Se,perPageOptions:g,totalPage:ne})}),e(y,{sx:{px:0},value:s.CANCELLED,children:e(v,{orders:ae,page:M,onPageChange:xe,perPage:U,onPerPageChange:fe,perPageOptions:g,totalPage:de})}),e(y,{sx:{px:0},value:s.REFUNDED,children:e(v,{orders:re,page:$,onPageChange:ye,perPage:q,onPerPageChange:me,perPageOptions:g,totalPage:oe})})]})},ea=()=>e(Je,{title:"My Orders",sx:{mt:4},children:e(Qe,{})});export{ea as default};
